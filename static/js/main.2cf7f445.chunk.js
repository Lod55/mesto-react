(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{13:function(t,e,n){},14:function(t,e,n){"use strict";n.r(e);var a=n(0),o=n(1),c=n.n(o),s=n(5),r=n.n(s),i=(n(13),n(3)),p=n(2),u=n.p+"static/media/Logo.a307e1c4.svg";var l=function(t){var e=t.srcLogo,n=t.altLogo;return Object(a.jsx)("header",{className:"header page__header",children:Object(a.jsx)("img",{src:e,alt:n,className:"header__logo"})})},d=n(6),j=n(7),_=new(function(){function t(e){var n=e.baseUrl,a=e.token,o=e.groupId;Object(d.a)(this,t),this._address=n,this._token=a,this._groupId=o}return Object(j.a)(t,[{key:"getInitialCards",value:function(){return fetch("".concat(this._address,"/").concat(this._groupId,"/cards"),{headers:{authorization:this._token}}).then((function(t){return t.ok?t.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(t.status))}))}},{key:"getInfoUser",value:function(){return fetch("".concat(this._address,"/").concat(this._groupId,"/users/me"),{headers:{authorization:this._token}}).then((function(t){return t.ok?t.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(t.status))}))}},{key:"editInfoUser",value:function(t){return fetch("".concat(this._address,"/").concat(this._groupId,"/users/me"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:t["popup-input-name"],about:t["popup-input-status"]})}).then((function(t){return t.ok?t.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(t.status))}))}},{key:"addCard",value:function(t){return fetch("".concat(this._address,"/").concat(this._groupId,"/cards"),{method:"POST",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({name:t["popup-input-place-name"],link:t["popup-input-url"]})}).then((function(t){return t.ok?t.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(t.status))}))}},{key:"removeCard",value:function(t){return fetch("".concat(this._address,"/").concat(this._groupId,"/cards/").concat(t),{method:"DELETE",headers:{authorization:this._token}}).then((function(t){return t.ok?t.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(t.status))}))}},{key:"addLike",value:function(t){return fetch("".concat(this._address,"/").concat(this._groupId,"/cards/likes/").concat(t),{method:"PUT",headers:{authorization:this._token}}).then((function(t){return t.ok?t.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(t.status))}))}},{key:"removeLike",value:function(t){return fetch("".concat(this._address,"/").concat(this._groupId,"/cards/likes/").concat(t),{method:"DELETE",headers:{authorization:this._token}}).then((function(t){return t.ok?t.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(t.status))}))}},{key:"editUserAvatar",value:function(t){return fetch("".concat(this._address,"/").concat(this._groupId,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this._token,"Content-Type":"application/json"},body:JSON.stringify({avatar:t["popup-input-url-avatar"]})}).then((function(t){return t.ok?t.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(t.status))}))}}]),t}())({baseUrl:"https://mesto.nomoreparties.co/v1",token:"429ceaf1-0a34-48aa-a4c9-c70c2c79ac6e",groupId:"cohort-19"});var h=function(t){return Object(a.jsxs)("article",{className:"place",children:[Object(a.jsx)("img",{className:"place__image",alt:t.title,src:t.src,onClick:t.handleClick}),Object(a.jsx)("button",{className:"button place__button-remove",type:"button"}),Object(a.jsxs)("div",{className:"place__row-block",children:[Object(a.jsx)("h2",{className:"place__title",children:t.title}),Object(a.jsxs)("div",{className:"place__column-block",children:[Object(a.jsx)("button",{className:"button place__button-like",type:"button"}),Object(a.jsx)("span",{className:"place__score-like",children:t.likes})]})]})]})};var b=function(t){var e=Object(o.useState)("Loading..."),n=Object(p.a)(e,2),c=n[0],s=n[1],r=Object(o.useState)(),u=Object(p.a)(r,2),l=u[0],d=u[1],j=Object(o.useState)(),b=Object(p.a)(j,2),m=b[0],O=b[1],f=Object(o.useState)([]),x=Object(p.a)(f,2),g=x[0],k=x[1],v=Object(o.useState)(!1),N=Object(p.a)(v,2),y=N[0],C=N[1];return Object(o.useEffect)((function(){_.getInfoUser().then((function(t){s(t.name),d(t.about),O(t.avatar)})).catch((function(t){return console.log("Error: ".concat(t))}))}),[]),Object(o.useEffect)((function(){C(!0),_.getInitialCards().then((function(t){var e=t.map((function(t){return{id:t._id,src:t.link,title:t.name,likes:t.likes.length}}));k(e)})).catch((function(t){return console.log("Error: ".concat(t))})).finally((function(){return C(!1)}))}),[]),Object(a.jsxs)("main",{className:"content page__content",children:[Object(a.jsxs)("section",{className:"profile content__item",children:[Object(a.jsx)("div",{className:"profile__overlay",onClick:t.onEditAvatar,children:Object(a.jsx)("img",{src:m,alt:t.altAvatar,className:"profile__avatar"})}),Object(a.jsxs)("div",{className:"profile__text-block",children:[Object(a.jsxs)("div",{className:"profile__row-block",children:[Object(a.jsx)("h1",{className:"profile__author",children:c}),Object(a.jsx)("button",{className:"button profile__button-edit",type:"button",onClick:t.onEditProfile})]}),Object(a.jsx)("p",{className:"profile__status",children:l})]}),Object(a.jsx)("button",{className:"button profile__button-add",type:"button",onClick:t.onAddPlace})]}),y?Object(a.jsx)("p",{children:"Loading..."}):Object(a.jsx)("section",{className:"places content__item",children:g.map((function(e){return Object(a.jsx)(h,Object(i.a)(Object(i.a)({},e),{},{handleClick:function(){t.onCardClick(e)}}),e.id)}))})]})};var m=function(t){return Object(a.jsx)("footer",{className:"footer page__footer",children:Object(a.jsxs)("p",{className:"footer__author",children:["\xa9 ",t.text]})})};var O=function(t){var e="popup popup_type_".concat(t.name," ").concat(t.isOpen?"popup_opened":"");return Object(a.jsx)("section",{className:e,children:Object(a.jsxs)("div",{className:"popup__container",children:[Object(a.jsx)("button",{className:"button popup__button-close",type:"button",onClick:t.onClose}),Object(a.jsx)("h2",{className:"popup__title",children:t.title}),Object(a.jsxs)("form",{className:"popup__form",name:t.name,id:"popup-form-edit",children:[t.children,Object(a.jsx)("button",{className:"button popup__button-submit",type:"submit",children:t.textButton})]})]})})};var f=function(t){var e="popup popup_blackout ".concat(t.card.isOpen?"popup_opened":"");return Object(a.jsx)("section",{className:e,id:"popup-image",children:Object(a.jsxs)("figure",{className:"popup__figure",children:[Object(a.jsx)("button",{className:"button popup__button-close",type:"button",onClick:t.onClose}),Object(a.jsx)("img",{className:"popup__image",alt:"\u041a\u0430\u0440\u0442\u0438\u043d\u043a\u0430",src:t.card.src}),Object(a.jsx)("figcaption",{className:"popup__caption",children:t.card.title})]})})};var x=function(){var t=Object(o.useState)(!1),e=Object(p.a)(t,2),n=e[0],c=e[1],s=Object(o.useState)(!1),r=Object(p.a)(s,2),d=r[0],j=r[1],_=Object(o.useState)(!1),h=Object(p.a)(_,2),x=h[0],g=h[1],k=Object(o.useState)({isOpen:!1}),v=Object(p.a)(k,2),N=v[0],y=v[1];function C(){c(!1),j(!1),g(!1),y({isOpen:!1})}return Object(a.jsxs)("div",{className:"page__container",children:[Object(a.jsx)(l,{srcLogo:u,altLogo:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f \u041c\u0430\u0441\u0442\u0430 \u0420\u043e\u0441\u0441\u0438\u0438"}),Object(a.jsx)(b,{altAvatar:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0410\u0432\u0442\u043e\u0440\u0430",onEditProfile:function(){c(!0)},onAddPlace:function(){j(!0)},onEditAvatar:function(){g(!0)},onCardClick:function(t){!function(t){y(Object(i.a)({isOpen:!0},t))}(t)}}),Object(a.jsx)(m,{text:"2020 Mesto Russia Lod55"}),Object(a.jsxs)(O,{name:"popup-profile",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",textButton:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:n,onClose:C,children:[Object(a.jsx)("input",{className:"popup__input popup__input_type_author",type:"text",placeholder:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f",name:"popup-input-name",minLength:"2",maxLength:"40",required:!0}),Object(a.jsx)("span",{id:"popup-input-name-error",className:"popup__error"}),Object(a.jsx)("input",{className:"popup__input popup__input_type_status",type:"text",placeholder:"\u0420\u0430\u0441\u0441\u043a\u0430\u0436\u0438\u0442\u0435 \u043e \u0441\u0435\u0431\u0435",name:"popup-input-status",minLength:"2",maxLength:"200",required:!0}),Object(a.jsx)("span",{id:"popup-input-status-error",className:"popup__error"})]}),Object(a.jsxs)(O,{name:"popup-add-card",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",textButton:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",isOpen:d,onClose:C,children:[Object(a.jsx)("input",{className:"popup__input popup__input_type_place-name",type:"text",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",name:"popup-input-place-name",minLength:"2",maxLength:"30",required:!0}),Object(a.jsx)("span",{id:"popup-input-place-name-error",className:"popup__error"}),Object(a.jsx)("input",{className:"popup__input popup__input_type_photo",type:"url",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",name:"popup-input-url",required:!0}),Object(a.jsx)("span",{id:"popup-input-url-error",className:"popup__error"})]}),Object(a.jsxs)(O,{name:"popup-add-avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",textButton:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c",isOpen:x,onClose:C,children:[Object(a.jsx)("input",{className:"popup__input popup__input_type_photo",type:"url",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0430\u0432\u0430\u0442\u0430\u0440",name:"popup-input-url-avatar",required:!0}),Object(a.jsx)("span",{id:"popup-input-url-avatar-error",className:"popup__error"})]}),Object(a.jsx)(O,{name:"popup-remove-card",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",textButton:"\u0414\u0430"}),Object(a.jsx)(f,{card:N,onClose:C})]})},g=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,15)).then((function(e){var n=e.getCLS,a=e.getFID,o=e.getFCP,c=e.getLCP,s=e.getTTFB;n(t),a(t),o(t),c(t),s(t)}))};r.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(x,{})}),document.getElementById("root")),g()}},[[14,1,2]]]);
//# sourceMappingURL=main.2cf7f445.chunk.js.map